const express = require('express');
const app = express();
const port = 3000;
const bodyParser = require('body-parser');

var mysql = require('mysql');
var db = mysql.createConnection({
  host: 'localhost',
  user: 'root',
  password: 'Pw0nZor1!',
  database: 'miniapp'
});

db.connect();

app.use(bodyParser.json());
app.use(express.static('public'));
app.use(express.static('compiled'));

app.post('/', (req, res) => {
  db.query(`INSERT INTO users (username, email, passwords, addressLineOne, addressLineTwo, city, stateof, zip, phone, creditcardNumber, expiration, cvv, billingzip) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`, req.body.values, (error, data) => {
    if (error) {
      console.log(error);
      res.send(error);
    } else {
      db.query(`SELECT * FROM users WHERE username = "${req.body.values[0]}"`, (error, userdata) => {
        if (error) {
          console.log(error);
        } else {
          res.send(JSON.stringify(userdata[userdata.length - 1]));
        }
      });
    }
  });
});

app.listen(port, () => {
  console.log(`Listening at http://localhost:${port}`);
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NlcnZlci5qcyJdLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImFwcCIsInBvcnQiLCJib2R5UGFyc2VyIiwibXlzcWwiLCJkYiIsImNyZWF0ZUNvbm5lY3Rpb24iLCJob3N0IiwidXNlciIsInBhc3N3b3JkIiwiZGF0YWJhc2UiLCJjb25uZWN0IiwidXNlIiwianNvbiIsInN0YXRpYyIsInBvc3QiLCJyZXEiLCJyZXMiLCJxdWVyeSIsImJvZHkiLCJ2YWx1ZXMiLCJlcnJvciIsImRhdGEiLCJjb25zb2xlIiwibG9nIiwic2VuZCIsInVzZXJkYXRhIiwiSlNPTiIsInN0cmluZ2lmeSIsImxlbmd0aCIsImxpc3RlbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsVUFBVUMsUUFBUSxTQUFSLENBQWhCO0FBQ0EsTUFBTUMsTUFBTUYsU0FBWjtBQUNBLE1BQU1HLE9BQU8sSUFBYjtBQUNBLE1BQU1DLGFBQWFILFFBQVEsYUFBUixDQUFuQjs7QUFHQSxJQUFJSSxRQUFRSixRQUFRLE9BQVIsQ0FBWjtBQUNBLElBQUlLLEtBQUtELE1BQU1FLGdCQUFOLENBQXVCO0FBQzlCQyxRQUFNLFdBRHdCO0FBRTlCQyxRQUFNLE1BRndCO0FBRzlCQyxZQUFVLFdBSG9CO0FBSTlCQyxZQUFVO0FBSm9CLENBQXZCLENBQVQ7O0FBT0FMLEdBQUdNLE9BQUg7O0FBRUFWLElBQUlXLEdBQUosQ0FBUVQsV0FBV1UsSUFBWCxFQUFSO0FBQ0FaLElBQUlXLEdBQUosQ0FBUWIsUUFBUWUsTUFBUixDQUFlLFFBQWYsQ0FBUjtBQUNBYixJQUFJVyxHQUFKLENBQVFiLFFBQVFlLE1BQVIsQ0FBZSxVQUFmLENBQVI7O0FBRUFiLElBQUljLElBQUosQ0FBUyxHQUFULEVBQWMsQ0FBQ0MsR0FBRCxFQUFNQyxHQUFOLEtBQWM7QUFDMUJaLEtBQUdhLEtBQUgsQ0FBVSx5TUFBVixFQUFvTkYsSUFBSUcsSUFBSixDQUFTQyxNQUE3TixFQUFzTyxDQUFDQyxLQUFELEVBQVFDLElBQVIsS0FBaUI7QUFDclAsUUFBR0QsS0FBSCxFQUFVO0FBQ1JFLGNBQVFDLEdBQVIsQ0FBWUgsS0FBWjtBQUNBSixVQUFJUSxJQUFKLENBQVNKLEtBQVQ7QUFDRCxLQUhELE1BR087QUFDTGhCLFNBQUdhLEtBQUgsQ0FBVSx5Q0FBd0NGLElBQUlHLElBQUosQ0FBU0MsTUFBVCxDQUFnQixDQUFoQixDQUFtQixHQUFyRSxFQUF5RSxDQUFDQyxLQUFELEVBQVFLLFFBQVIsS0FBcUI7QUFDNUYsWUFBSUwsS0FBSixFQUFXO0FBQ1RFLGtCQUFRQyxHQUFSLENBQVlILEtBQVo7QUFDRCxTQUZELE1BRU87QUFDTEosY0FBSVEsSUFBSixDQUFTRSxLQUFLQyxTQUFMLENBQWVGLFNBQVNBLFNBQVNHLE1BQVQsR0FBa0IsQ0FBM0IsQ0FBZixDQUFUO0FBQ0Q7QUFDRixPQU5EO0FBT0Q7QUFDRixHQWJEO0FBY0QsQ0FmRDs7QUFtQkE1QixJQUFJNkIsTUFBSixDQUFXNUIsSUFBWCxFQUFpQixNQUFNO0FBQ3JCcUIsVUFBUUMsR0FBUixDQUFhLGlDQUFnQ3RCLElBQUssRUFBbEQ7QUFDRCxDQUZEIiwiZmlsZSI6InNlcnZlci5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XG5jb25zdCBhcHAgPSBleHByZXNzKCk7XG5jb25zdCBwb3J0ID0gMzAwMDtcbmNvbnN0IGJvZHlQYXJzZXIgPSByZXF1aXJlKCdib2R5LXBhcnNlcicpO1xuXG5cbnZhciBteXNxbCA9IHJlcXVpcmUoJ215c3FsJylcbnZhciBkYiA9IG15c3FsLmNyZWF0ZUNvbm5lY3Rpb24oe1xuICBob3N0OiAnbG9jYWxob3N0JyxcbiAgdXNlcjogJ3Jvb3QnLFxuICBwYXNzd29yZDogJ1B3MG5ab3IxIScsXG4gIGRhdGFiYXNlOiAnbWluaWFwcCdcbn0pXG5cbmRiLmNvbm5lY3QoKVxuXG5hcHAudXNlKGJvZHlQYXJzZXIuanNvbigpKVxuYXBwLnVzZShleHByZXNzLnN0YXRpYygncHVibGljJykpO1xuYXBwLnVzZShleHByZXNzLnN0YXRpYygnY29tcGlsZWQnKSlcblxuYXBwLnBvc3QoJy8nLCAocmVxLCByZXMpID0+IHtcbiAgZGIucXVlcnkoYElOU0VSVCBJTlRPIHVzZXJzICh1c2VybmFtZSwgZW1haWwsIHBhc3N3b3JkcywgYWRkcmVzc0xpbmVPbmUsIGFkZHJlc3NMaW5lVHdvLCBjaXR5LCBzdGF0ZW9mLCB6aXAsIHBob25lLCBjcmVkaXRjYXJkTnVtYmVyLCBleHBpcmF0aW9uLCBjdnYsIGJpbGxpbmd6aXApIFZBTFVFUyAoPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPylgLCByZXEuYm9keS52YWx1ZXMgLCAoZXJyb3IsIGRhdGEpID0+IHtcbiAgICBpZihlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgcmVzLnNlbmQoZXJyb3IpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkYi5xdWVyeShgU0VMRUNUICogRlJPTSB1c2VycyBXSEVSRSB1c2VybmFtZSA9IFwiJHtyZXEuYm9keS52YWx1ZXNbMF19XCJgLCAoZXJyb3IsIHVzZXJkYXRhKSA9PiB7XG4gICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlcy5zZW5kKEpTT04uc3RyaW5naWZ5KHVzZXJkYXRhW3VzZXJkYXRhLmxlbmd0aCAtIDFdKSk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICB9KVxufSk7XG5cblxuXG5hcHAubGlzdGVuKHBvcnQsICgpID0+IHtcbiAgY29uc29sZS5sb2coYExpc3RlbmluZyBhdCBodHRwOi8vbG9jYWxob3N0OiR7cG9ydH1gKVxufSk7XG5cblxuXG5cblxuXG5cblxuXG4iXX0=